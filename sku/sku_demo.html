<!doctype html>
<html lang="en">
<head>
    <style type="text/css">
        [v-cloak]{
            display: none;
        }
        ul li{
            width: 30px;
            height: 30px;
            line-height: 30px;
            padding: 10px;
            border: 1px solid;
            text-align: center;
            display: inline-block;
            margin: 0 10px;
            background-color: #fff;
        }
        ul li.selected{
            background-color: red;
        }
        ul li.disabled{
            background-color: #888888;
        }
    </style>

</head>
<body class="packWill-group-body">
<div id="box" class="jackson-box" v-cloak>

    <template>
        <p v-for="(item, index) in skuList">
            id:{{item.sku_id}}/{{item.color}}/{{item.size}}/${{item.price}}/${{item.price_2}}/num:{{item.inventory}}</p>
    </template>
    <ul>
        <li>item</li>
        <li>item</li>
        <li>item</li>
    </ul>


</div>

<script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script>

<script>
    /*
    * 思路：
    * 1、初始化数据 skuList（服务端数据）
    * 2、
    * attrs = [
    *   {
    *       name: "color",
    *       items: [
    *           red, blue, black
    *       ]
    *   },
    *   {
    *       name: "size",
    *       items: [
    *           S, M, L
    *       ]
    *   }
    * ]
    *
    *
    * */
    new Vue({
        el:"#box",
        data:{
            skuList: [],
            showData: {},
            goodsDict: {},
            allKeys: []
        },
        methods:{
            initData:function (skuList) {
                this.skuList = skuList;
                this.calculateShowData();
            },
            calculateShowData: function () {
                var _this = this,
                    dict  = "";

                _this.skuList.forEach(function (item, index) {
                    for (var key in item) {
                        if (item.hasOwnProperty(key)) {
                            if (key === "color" || key !== 'size') {
                                dict += item[key] + ';';
                                if (_this.showData[key]) {
                                    // 去重
                                    if (_this.showData[key].indexOf(item[key]) === -1) {
                                        _this.showData[key].push(item[key]);
                                    }
                                } else {
                                    _this.showData[key] = new Array(item[key]);
                                    _this.allKeys.push(item[key]);
                                }
                            }


                        }

                        if (item.num > 0) {
                            _this.goodsDict[dict] = {
                                id: item.id,
                                num: item.num
                            };
                        }
                    }
                })


                for (var ke in _this.showData) {
                    _this.allKeys.push(_this.showData[ke]);
                }
                console.log(this.goodsDict);
                console.log(this.allKeys);
                console.log(this.showData);
            }
        },
        computed:{

        },
        created:function () {
            var skuList = [
                {"sku_id":"1","listing_id":"4","color":"red","size":"Small","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71EpeflOmNL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"2","listing_id":"4","color":"red","size":"Medium","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71EpeflOmNL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"3","listing_id":"4","color":"red","size":"Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71EpeflOmNL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"4","listing_id":"4","color":"red","size":"X-Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71EpeflOmNL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"5","listing_id":"4","color":"black","size":"Small","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71-cyw4c2nL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"7","listing_id":"4","color":"black","size":"Medium","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71-cyw4c2nL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"8","listing_id":"4","color":"black","size":"Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71-cyw4c2nL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"9","listing_id":"4","color":"black","size":"X-Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71-cyw4c2nL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"10","listing_id":"4","color":"blue","size":"Small","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71Gd1ddNHqL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"11","listing_id":"4","color":"blue","size":"Medium","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71Gd1ddNHqL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"12","listing_id":"4","color":"blue","size":"Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71Gd1ddNHqL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"13","listing_id":"4","color":"blue","size":"X-Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/71Gd1ddNHqL._SX466._SX._UX._SY._UY_.jpg","inventory":"1000"},
                {"sku_id":"14","listing_id":"4","color":"gray","size":"Small","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/81Y%2Bq-5sR%2BL._UX466_.jpg","inventory":"1000"},
                {"sku_id":"15","listing_id":"4","color":"gray","size":"Medium","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/81Y%2Bq-5sR%2BL._UX466_.jpg","inventory":"1000"},
                {"sku_id":"16","listing_id":"4","color":"gray","size":"Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/81Y%2Bq-5sR%2BL._UX466_.jpg","inventory":"1000"},
                {"sku_id":"17","listing_id":"4","color":"gray","size":"X-Large","price":"9.99","price_2":"7.99","sku_photo":"https://images-na.ssl-images-amazon.com/images/I/81Y%2Bq-5sR%2BL._UX466_.jpg","inventory":"1000"}];

            this.initData(skuList);
        }
    })
</script>

</body>
</html>